@model CadEmprestimoViewModel

@{ var editando = Model.Emprestimo != null; }

<div class="row justify-content-md-center">
    <form asp-action="Cadastro" method="POST" class="col-md-4">
        @if (editando)
        {
            <input type="hidden" asp-for="Emprestimo.Id" name="Id" value="@Model.Emprestimo.Id" />
        }

        <fieldset>
            <legend>Usuário</legend>
            <div class="form-group">
                <label asp-for="Emprestimo.NomeUsuario">Nome</label>
                <input asp-for="Emprestimo.NomeUsuario" class="form-control" readonly="@editando" required="@(!editando)" />
            </div>
            <div class="form-group">
                <label asp-for="Emprestimo.Telefone">Telefone</label>
                <input asp-for="Emprestimo.Telefone" class="form-control" readonly="@editando" required="@(!editando)" />
            </div>
        </fieldset>
        <fieldset>
            <legend>Livro</legend>
            <div class="form-group">
                <label asp-for="Emprestimo.LivroId">Livro</label>
                <select asp-for="Emprestimo.LivroId" class="form-control" required>
                    @foreach (Livro livro in Model.LivrosDisponiveis)
                    {
                        <option value="@livro.Id">@livro.Titulo</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <label asp-for="Emprestimo.DataEmprestimo">Data de Empréstimo</label>
                <input type="date" asp-for="Emprestimo.DataEmprestimo" class="form-control" required />
            </div>
            <div class="form-group">
                <label asp-for="Emprestimo.DataDevolucao">Data de Devolução</label>
                <input type="date" asp-for="Emprestimo.DataDevolucao" class="form-control" required />
            </div>

            @if (editando)
            {
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" asp-for="Emprestimo.Devolvido" />
                    <label class="form-check-label" for="Devolvido">Devolvido</label>
                </div>
            }

        </fieldset>

        <br />

        <input type="submit" value="Voltar" asp-controller="Emprestimo" asp-action="Listagem" formnovalidate="formnovalidate" class="btn" />
        <input type="submit" value="Salvar" class="btn btn-primary" />
    </form>
</div>